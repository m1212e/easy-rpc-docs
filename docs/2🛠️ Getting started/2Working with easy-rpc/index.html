<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- <link rel="icon" href="/easy-rpc-docs/favicon.png" /> -->
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta http-equiv="content-security-policy" content="">
		<link href="/easy-rpc-docs/_app/immutable/assets/_layout-ad844061.css" rel="stylesheet">
		<link href="/easy-rpc-docs/_app/immutable/assets/Code-5df0ceee.css" rel="stylesheet">
		<link href="/easy-rpc-docs/_app/immutable/assets/_layout-3c4f9c05.css" rel="stylesheet">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/start-f08a0ba8.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/index-7ac94c92.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/singletons-e1b67400.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/preload-helper-b21cceae.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/components/pages/_layout.svelte-8e46c6cf.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/DarkMode-f349345e.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/TableOfContent-71c2b9bf.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/stores-a2e70929.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/index-127ce783.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/modules/pages/_layout.js-0cc788e0.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/_layout-6bdfc1ff.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/components/pages/2🛠️ Getting started/2Working with easy-rpc/_page.md-ab07a998.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/Page-c0f2c207.js">
		<link rel="modulepreload" href="/easy-rpc-docs/_app/immutable/chunks/Code-6d2e2b36.js">
	</head>
	<body>
		<div>





<div class="dark">
	<div class="flex flex-col items-center bg-white dark:bg-gray-900 text-black dark:text-gray-300 duration-200 w-full h-full">
		<span class="p-3 flex justify-between items-center h-12 fixed w-full bg-white dark:bg-gray-900 z-10"><span class="flex items-center"><button class="block md:hidden"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu "><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
				<a class="ml-4 text-2xl font-bold pb-1" href="/easy-rpc-docs/">easy-rpc</a></span>
			<span class="flex items-center space-x-4"><a href="https://github.com/m1212e/easy-rpc"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github "><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
				<span class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun hover:animate-spin"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
				
				</span></span>

		
		<div class="flex relative"><nav style="left: -30rem;" class="fixed top-12 duration-300 nav-width z-10 bg-white dark:bg-gray-900 p-4 rounded-lg shadow-2xl md:shadow-none svelte-thagi0"><span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800">💬 What is easy-rpc
	<button class="p-2 rounded-md hover:bg-slate-300 dark:hover:bg-gray-700 duration-200"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down  duration-200"><polyline points="6 9 12 15 18 9"></polyline></svg></button></span>
<div class="pl-5"><span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800"><a href="/easy-rpc-docs/1💬 What is easy-rpc/1Overview/" class="w-full">Overview</a>
	</span>
<span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800"><a href="/easy-rpc-docs/1💬 What is easy-rpc/2Features/" class="w-full">Features</a>
	</span>
</div><span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800">🛠️ Getting started
	<button class="p-2 rounded-md hover:bg-slate-300 dark:hover:bg-gray-700 duration-200"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down  duration-200"><polyline points="6 9 12 15 18 9"></polyline></svg></button></span>
<div class="pl-5"><span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800"><a href="/easy-rpc-docs/2🛠️ Getting started/1Setup/" class="w-full">Setup</a>
	</span>
<span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800"><a href="/easy-rpc-docs/2🛠️ Getting started/2Working with easy-rpc/" class="w-full">Working with easy-rpc</a>
	</span>
</div><span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800"><a href="/easy-rpc-docs/3🎭 Roles and endpoints/" class="w-full">🎭 Roles and endpoints</a>
	</span>
<span class="flex justify-between items-center font-bold text-xl rounded-md duration-200 py-2 px-3 m-1 hover:bg-slate-200 dark:hover:bg-gray-800"><a href="/easy-rpc-docs/4🖋️ Syntax/" class="w-full">🖋️ Syntax</a>
	</span>
</nav>
			<main class="px-5 py-10 content-width min-h-screen svelte-thagi0"><div class="text-justify"><h1 id="working-with-easy-rpc"><a aria-hidden="true" tabindex="-1" href="#working-with-easy-rpc"><span class="icon icon-link"></span></a>Working with easy-rpc</h1>
<p>After you set up an easy-rpc project or cloned a template/existing project it is very easy to get started working with easy-rpc.
If you followed the manual setup from the previous step you probably already have the Vscode extension installed or downloaded the transpiler binary. If this is not the case, make sure to <strong><a href="/easy-rpc-docs/2%F0%9F%9B%A0%EF%B8%8F%20Getting%20started/1Setup#vscode-extension">setup the transpiler</a></strong> first.</p>
<h2 id="erpc"><a aria-hidden="true" tabindex="-1" href="#erpc"><span class="icon icon-link"></span></a>.erpc</h2>
<p>The .erpc directory is where the actual magic happens. Whenever the running transpiler detects changes to your source files, it will generate the code required and put it into the <code>.erpc/generated</code> directory. You can import the generated clients from this directory, make calls on them or register handlers for incoming calls. The following examples refer to the manual setup from the previous section. If something is unclear, make sure to read it.</p>
<h2 id="backend"><a aria-hidden="true" tabindex="-1" href="#backend"><span class="icon icon-link"></span></a>Backend</h2>
<p>While setting up our project we configured two roles: “Frontend” and “Backend”. The first is a browser which has one endpoint, the second is an http-server which also has one endpoint. First we want to make sure that we can answer incoming requests on the backend. As you might remember, we declared a ping endpoint on the backend in our <code>/webapp/sources/api.erpc</code>, which takes a string parameter and returns a string: <code>Backend ping(msg string) string</code>. Now lets implement the handler for this endpoint.</p>
<div class="code w-full flex flex-col rounded-lg my-6 text-white relative svelte-1urfzr0"><span class="flex w-full justify-between border-b-2 px-3 py-2"><span class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file mr-2"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
				/webapp/backend/main.ts</span>
			<span class="flex relative"><button title="Copy this snippet" class="absolute right-2/4"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy "><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></span></span>
	<code class="p-3 overflow-scroll"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: #282c34; color: #abb2bf"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">    first, we import the Backend class from the generated directory</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Backend</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'./.erpc/generated/Backend'</span><span style="color: #ABB2BF">;</span></div><div class='line'></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">    Now we instantiate a server. The parameter object allows us to configure the server. Depending on the role the configuration options might differ.</span></div><div class='line'><span style="color: #7F848E">    As a second parameter we could pass callback handlers, but this is optional. We will set the handlers later. Passing them as a parameter on creation has an advantage tough:</span></div><div class='line'><span style="color: #7F848E">    TypeScript will let you know if a handler is not implemented since the types wont match. If this is important to you, you can decide to pass the handlers on creation.</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Backend</span><span style="color: #ABB2BF">(</span></div><div class='line'><span style="color: #ABB2BF">	{</span></div><div class='line'><span style="color: #ABB2BF">		</span><span style="color: #E06C75">allowedCorsOrigins</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">'*'</span><span style="color: #ABB2BF">],</span></div><div class='line'><span style="color: #ABB2BF">		</span><span style="color: #E06C75">port</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1234</span></div><div class='line'><span style="color: #ABB2BF">	} </span><span style="color: #7F848E">/*, { handlers could go here }*/</span></div><div class='line'><span style="color: #ABB2BF">);</span></div><div class='line'></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">  After we created a server object, we now want to register a handler to process incoming requests. Since we defined the endpoint in api.erpc it will live at the .api namespace on out backend object.</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">api</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">ping</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">async</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'incoming ping request: '</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">);</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'PONG'</span><span style="color: #ABB2BF">;</span></div><div class='line'><span style="color: #ABB2BF">};</span></div><div class='line'></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">  After registering all out handlers, we can start the server. In many cases we need an async wrapper for top-level awaits.</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">();</span></div></code></div></pre><!-- HTML_TAG_END --></code>
</div>
<p>If you run the app with the start script you should now see a console message which confirms the server is listening on the configured port.</p>
<h2 id="frontend"><a aria-hidden="true" tabindex="-1" href="#frontend"><span class="icon icon-link"></span></a>Frontend</h2>
<p>Now we want to call the backend endpoint from the frontend.</p>
<div class="code w-full flex flex-col rounded-lg my-6 text-white relative svelte-1urfzr0"><span class="flex w-full justify-between border-b-2 px-3 py-2"><span class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file mr-2"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
				/webapp/frontend/src/main.ts</span>
			<span class="flex relative"><button title="Copy this snippet" class="absolute right-2/4"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy "><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></span></span>
	<code class="p-3 overflow-scroll"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: #282c34; color: #abb2bf"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">    import the backend class</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Backend</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'../.erpc/generated/Backend'</span><span style="color: #ABB2BF">;</span></div><div class='line'></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">  Now we instantiate the target. In out case it lives on the local machine and listens to the 1234 port, which we configured earlier in the backend code.</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Backend</span><span style="color: #ABB2BF">({</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E06C75">address</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">'http://localhost'</span><span style="color: #ABB2BF">,</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E06C75">port</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1234</span></div><div class='line'><span style="color: #ABB2BF">});</span></div><div class='line'></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">    After creating the target we can send requests to it. Just as we declared the handler on the backend object, now we call it on the backend object and await the response.</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">api</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">ping</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'PING'</span><span style="color: #ABB2BF">));</span></div></code></div></pre><!-- HTML_TAG_END --></code>
</div>
<p>After starting the webapp and opening the browser, take a look at the console to see the reponse from the backend logged.</p>
<h2 id="frontend-endpoints"><a aria-hidden="true" tabindex="-1" href="#frontend-endpoints"><span class="icon icon-link"></span></a>Frontend endpoints</h2>
<p>You might now wonder how you can use the second endpoint which we defined in the sources, the one on the frontend: <code>Frontend ping(msg string) string</code>. It too has one string parameter and a string return. But this time, the frontend is the role offering this endpoint.</p>
<p>Calling this endpoint is very similar to one on the backend. Internally, easy-rpc uses WebSockets to pass requests from the backend to the frontend.</p>
<p>Again we will first look at the backend.</p>
<div class="code w-full flex flex-col rounded-lg my-6 text-white relative svelte-1urfzr0"><span class="flex w-full justify-between border-b-2 px-3 py-2"><span class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file mr-2"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
				/webapp/backend/main.ts</span>
			<span class="flex relative"><button title="Copy this snippet" class="absolute right-2/4"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy "><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></span></span>
	<code class="p-3 overflow-scroll"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: #282c34; color: #abb2bf"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Backend</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'./.erpc/generated/Backend'</span><span style="color: #ABB2BF">;</span></div><div class='line'><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Backend</span><span style="color: #ABB2BF">({</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E06C75">allowedCorsOrigins</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">'*'</span><span style="color: #ABB2BF">],</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E06C75">port</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1234</span></div><div class='line'><span style="color: #ABB2BF">});</span></div><div class='line'></div><div class='line'><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">api</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">ping</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">async</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'incoming ping request: '</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">);</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'PONG'</span><span style="color: #ABB2BF">;</span></div><div class='line'><span style="color: #ABB2BF">};</span></div><div class='line'></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">  We can register a callback to run whenever a client connects to our server. The callback gets the browser as a parameter, so you can perform calls on the target.</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">onConnection</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">async</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Frontend connected!'</span><span style="color: #ABB2BF">);</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #7F848E">// this calls the ping method on the frontend and awaits the result</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">target</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">api</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">ping</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'PING'</span><span style="color: #ABB2BF">));</span></div><div class='line'><span style="color: #ABB2BF">});</span></div><div class='line'></div><div class='line'><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">();</span></div></code></div></pre><!-- HTML_TAG_END --></code>
</div>
<p>On the frontend, we obviously need to implement handlers for the offered endpoints.</p>
<div class="code w-full flex flex-col rounded-lg my-6 text-white relative svelte-1urfzr0"><span class="flex w-full justify-between border-b-2 px-3 py-2"><span class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file mr-2"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
				/webapp/frontend/src/main.ts</span>
			<span class="flex relative"><button title="Copy this snippet" class="absolute right-2/4"><svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy "><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></span></span>
	<code class="p-3 overflow-scroll"><!-- HTML_TAG_START --><pre class="shiki" style="background-color: #282c34; color: #abb2bf"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Backend</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'../.erpc/generated/Backend'</span><span style="color: #ABB2BF">;</span></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">  To do this, we need to import the frontend class</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Frontend</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'../.erpc/generated/Frontend'</span><span style="color: #ABB2BF">;</span></div><div class='line'></div><div class='line'><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Backend</span><span style="color: #ABB2BF">({</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E06C75">address</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">'http://localhost'</span><span style="color: #ABB2BF">,</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E06C75">port</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1234</span></div><div class='line'><span style="color: #ABB2BF">});</span></div><div class='line'></div><div class='line'><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">backend</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">api</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">ping</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'PING'</span><span style="color: #ABB2BF">));</span></div><div class='line'></div><div class='line'><span style="color: #7F848E">/*</span></div><div class='line'><span style="color: #7F848E">  Creating a frontend instance to register the handlers on</span></div><div class='line'><span style="color: #7F848E">*/</span></div><div class='line'><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">frontend</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Frontend</span><span style="color: #ABB2BF">({});</span></div><div class='line'><span style="color: #E5C07B">frontend</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">api</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">ping</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">async</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'incoming ping request: '</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">);</span></div><div class='line'><span style="color: #ABB2BF">	</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'PONG'</span><span style="color: #ABB2BF">;</span></div><div class='line'><span style="color: #ABB2BF">};</span></div><div class='line'></div><div class='line'><span style="color: #E5C07B">server</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">start</span><span style="color: #ABB2BF">();</span></div></code></div></pre><!-- HTML_TAG_END --></code>
</div>
<p>Now both roles can send requests to each other.</p></div></main>
			<section class="hidden md:block fixed w-56 right-0 top-12"><ul class="list-none">
</ul></section></div></div>
</div>


		<script type="module" data-sveltekit-hydrate="sirb27">
			import { start } from "/easy-rpc-docs/_app/immutable/start-f08a0ba8.js";

			start({
				env: {},
				hydrate: {
					status: 200,
					error: null,
					node_ids: [0, 6],
					params: {},
					route: {"id":"/2🛠️ Getting started/2Working with easy-rpc"},
					data: [null,null],
					form: null
				},
				paths: {"base":"/easy-rpc-docs","assets":"/easy-rpc-docs"},
				target: document.querySelector('[data-sveltekit-hydrate="sirb27"]').parentNode,
				trailing_slash: "always"
			});
		</script>
	</div>
	</body>
</html>
